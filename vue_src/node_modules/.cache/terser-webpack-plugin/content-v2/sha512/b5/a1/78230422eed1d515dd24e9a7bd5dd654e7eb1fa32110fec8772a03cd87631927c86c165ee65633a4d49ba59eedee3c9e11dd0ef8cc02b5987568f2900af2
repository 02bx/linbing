{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-4deee9f6\"],{ad80:function(e,t,a){},bd81:function(module,__webpack_exports__,__webpack_require__){\"use strict\";var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"bc3a\"),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__),_libs_http__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"b1d0\"),_libs_crypto__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"e0ac\"),_libs_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"c276\");__webpack_exports__[\"a\"]={inject:[\"reload\"],name:\"MarkdownEditor\",data:function(){return{new_notename:\"\",new_content:\"\",old_notename:\"\",old_content:\"\",flag:\"\",token:Object(_libs_util__WEBPACK_IMPORTED_MODULE_3__[\"i\"])(),publish_flag:\"0\"}},created:function(){this.$nextTick(this.getParams())},methods:{getParams:function(){this.$route.query.params.notename&&(this.new_notename=this.$route.query.params.notename,this.new_content=this.$route.query.params.content,this.old_notename=this.$route.query.params.notename,this.old_content=this.$route.query.params.content)},handlnotename:function handlnotename(){var _this=this;if(\"\"==this.new_notename)this.$Notice.error({title:\"笔记名字不能为空\",desc:\"请输入笔记名字 \"});else{var data={type:\"notename\",token:this.token,data:this.new_notename};data=JSON.stringify(data);var params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_2__[\"a\"].Encrypt(data)};_libs_http__WEBPACK_IMPORTED_MODULE_1__[\"a\"].post(\"/api/query\",params).then(function(res){switch(res.data=eval(\"(\"+res.data+\")\"),res.data.code){case\"Z1001\":_this.$Notice.error({title:\"系统异常\",desc:\"系统发生异常,请稍后再次尝试\"});break;case\"Z1002\":_this.$Notice.error({title:\"请求异常\",desc:\"请求异常,请稍后再次尝试\"});break;case\"Z1004\":_this.$Notice.error({title:\"修改失败\",desc:\"认证失败,请稍后再次尝试\"});break;case\"Z10010\":_this.new_notename!=_this.old_notename&&(_this.flag=\"1\",_this.$Notice.error({title:\"笔记已存在\",desc:\"笔记名字已存在,请重新输入笔记名字\"}));break;default:break}})}},change:function(e){this.publish_flag=e?\"1\":\"0\"},handleSubmit:function handleSubmit(){var _this2=this;if(\"\"==this.new_notename)this.$Notice.error({title:\"笔记名字不能为空\",desc:\"请输入笔记名字 \"});else if(\"1\"==this.flag)this.$Notice.error({title:\"笔记已存在\",desc:\"笔记名字已存在,请重新输入笔记名字\"});else if(\"\"==this.new_content)this.$Notice.error({title:\"笔记内容不能为空\",desc:\"请输入笔记内容\"});else{var data={token:this.token,old_notename:this.old_notename,new_notename:this.new_notename,publish_flag:this.publish_flag,trash_flag:\"0\"};data=JSON.stringify(data);var params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_2__[\"a\"].Encrypt(data),old_content:this.old_content,new_content:this.new_content};_libs_http__WEBPACK_IMPORTED_MODULE_1__[\"a\"].post(\"/api/editnote\",params).then(function(res){switch(res.data=eval(\"(\"+res.data+\")\"),res.data.code){case\"Z1000\":_this2.$Notice.success({title:\"修改成功\",desc:\"笔记修改成功,请到笔记列表查看\"}),setTimeout(function(){_this2.$router.push({path:\"/components/notelist\"})},1e3);break;case\"Z1001\":_this2.$Notice.error({title:\"系统异常\",desc:\"系统发生异常,请稍后再次尝试\"});break;case\"Z1002\":_this2.$Notice.error({title:\"系统异常\",desc:\"系统发生异常,请稍后再次尝试\"});break;case\"Z1004\":_this2.$Notice.error({title:\"修改失败\",desc:\"认证失败,请稍后再次尝试\"});break;default:break}})}},$imgAdd:function $imgAdd(pos,$file){var _this3=this,instance=axios__WEBPACK_IMPORTED_MODULE_0___default.a.create({withCredentials:!0}),formdata=new FormData;formdata.append(\"file\",$file),formdata.append(\"token\",this.token),this.img_file[pos]=$file,instance({url:\"/api/upload\",method:\"post\",data:formdata,headers:{\"Content-Type\":\"multipart/form-data\"}}).then(function(res){switch(res.data=eval(\"(\"+res.data+\")\"),res.data.code){case\"Z10010\":_this3.$Notice.success({title:\"上传成功\",desc:res.data.message}),_this3.$refs.md.$img2Url(pos,res.data.data);break;case\"Z1001\":_this3.$Notice.error({title:\"系统异常\",desc:\"系统发生异常,请稍后再次尝试\"});break;case\"Z1004\":_this3.$Notice.error({title:\"认证失败\",desc:\"认证失败,请稍后再次尝试\"});break;case\"Z10011\":_this3.$Notice.error({title:\"上传异常\",desc:\"上传失败,请稍候重试!\"});break;case\"Z10012\":_this3.$Notice.error({title:\"上传异常\",desc:\"上传文件名为空,请添加文件名\"});break;case\"Z10013\":_this3.$Notice.error({title:\"上传异常\",desc:\"上传文件格式不正确,请稍候重试\"});break;default:break}})},$imgDel:function(e){delete this.img_file[e]}}}},dc43:function(e,t,a){\"use strict\";var s=a(\"ad80\"),i=a.n(s);i.a},f267:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Input\",{staticStyle:{width:\"100%\"},attrs:{autosize:!0,placeholder:\"请输入笔记名称......\",clearable:\"\"},on:{\"on-blur\":function(t){return e.handlnotename()}},model:{value:e.new_notename,callback:function(t){e.new_notename=t},expression:\"new_notename\"}},[a(\"Icon\",{attrs:{slot:\"prefix\",type:\"ios-book\"},slot:\"prefix\"})],1),a(\"mavon-editor\",{ref:\"md\",staticClass:\"editor\",on:{keydown:function(e){},imgAdd:e.$imgAdd,imgDel:e.$imgDel},model:{value:e.new_content,callback:function(t){e.new_content=t},expression:\"new_content\"}}),a(\"i-switch\",{staticClass:\"switch\",attrs:{size:\"large\"},on:{\"on-change\":e.change},model:{value:e.publish_flag,callback:function(t){e.publish_flag=t},expression:\"publish_flag\"}},[a(\"span\",{attrs:{slot:\"open\"},slot:\"open\"},[e._v(\"公开\")]),a(\"span\",{attrs:{slot:\"close\"},slot:\"close\"},[e._v(\"禁止\")])]),a(\"Button\",{staticClass:\"button\",attrs:{type:\"primary\",long:\"\"},on:{click:e.handleSubmit}},[e._v(\"保存笔记\")])],1)},i=[],n=a(\"bd81\"),_=n[\"a\"],o=(a(\"dc43\"),a(\"2877\")),r=Object(o[\"a\"])(_,s,i,!1,null,null,null);t[\"default\"]=r.exports}}]);","extractedComments":[]}