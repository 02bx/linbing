{"remainingRequest":"C:\\Users\\dscjh\\Desktop\\临兵 - 副本\\vue\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\dscjh\\Desktop\\临兵 - 副本\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\dscjh\\Desktop\\临兵 - 副本\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\dscjh\\Desktop\\临兵 - 副本\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\dscjh\\Desktop\\临兵 - 副本\\vue\\src\\components\\changepassword-form\\changepassword-form.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\dscjh\\Desktop\\临兵 - 副本\\vue\\src\\components\\changepassword-form\\changepassword-form.vue","mtime":1578383939737},{"path":"C:\\Users\\dscjh\\Desktop\\临兵 - 副本\\vue\\.babelrc","mtime":1569934280000},{"path":"C:\\Users\\dscjh\\Desktop\\临兵 - 副本\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\dscjh\\Desktop\\临兵 - 副本\\vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\dscjh\\Desktop\\临兵 - 副本\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\dscjh\\Desktop\\临兵 - 副本\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\dscjh\\Desktop\\临兵 - 副本\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { isemail, isusername, ischecknum, ispassword } from '@/libs/validate';\nimport RSA from '@/libs/crypto';\nimport http from '@/libs/http';\nimport { getToken } from '@/libs/util';\nexport default {\n  name: 'ChangepasswordForm',\n  props: {\n    oldpasswordRules: {\n      type: Array,\n      default: function _default() {\n        return [{\n          required: true,\n          trigger: 'blur',\n          validator: ispassword\n        }];\n      }\n    },\n    newpasswordRules: {\n      type: Array,\n      default: function _default() {\n        return [{\n          required: true,\n          trigger: 'blur',\n          validator: ispassword\n        }];\n      }\n    },\n    newpasswordconfirmRules: {\n      type: Array,\n      default: function _default() {\n        return [{\n          required: true,\n          trigger: 'blur',\n          validator: ispassword\n        }];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      capta: '',\n      form: {\n        oldpassword: '',\n        newpassword: '',\n        newpasswordconfirm: ''\n      }\n    };\n  },\n  computed: {\n    rules: function rules() {\n      return {\n        oldpassword: this.oldpasswordRules,\n        newpassword: this.newpasswordRules,\n        newpasswordconfirm: this.newpasswordconfirmRules\n      };\n    }\n  },\n  methods: {\n    getchecknum: function getchecknum() {\n      var _this = this;\n\n      if (this.form.email == '') {\n        this.$refs.ChangepasswordForm.validateField('email', function (valid) {});\n      } else {\n        var data = {\n          'type': 'email',\n          'data': this.form.email\n        };\n        data = JSON.stringify(data);\n        var params = {\n          'data': RSA.Encrypt(data)\n        };\n        http.post('/api/getchecknum', params).then(function (res) {\n          res.data = eval('(' + res.data + ')');\n\n          switch (res.data.code) {\n            case 'Z1000':\n              _this.$Notice.success({\n                title: '发送邮件成功',\n                desc: '请打开邮件查收验证码 '\n              });\n\n              _this.capta = res.data.data.capta;\n              break;\n\n            case 'Z1001':\n              _this.$Notice.error({\n                title: '发送邮件失败',\n                desc: '系统发生异常,请稍后再次尝试'\n              });\n\n              break;\n\n            case 'Z1002':\n              _this.$Notice.error({\n                title: '发送邮件失败',\n                desc: '系统发生异常,请稍后再次尝试'\n              });\n\n              break;\n          }\n        });\n      }\n    },\n    handleSubmit: function handleSubmit() {\n      var _this2 = this;\n\n      this.$refs.ChangepasswordForm.validate(function (valid) {\n        if (valid) {\n          if (_this2.form.newpassword != _this2.form.newpasswordconfirm) {\n            _this2.$Notice.error({\n              title: '二次密码输入不一样',\n              desc: '二次密码输入不一样,请重新输入!'\n            });\n          } else {\n            _this2.$emit('on-success-valid', {\n              oldpassword: _this2.form.oldpassword,\n              newpassword: _this2.form.newpassword,\n              token: getToken()\n            });\n          }\n        }\n      });\n    }\n  }\n};",null]}