{"remainingRequest":"/root/zhenjinote/note/vue/node_modules/babel-loader/lib/index.js!/root/zhenjinote/note/vue/node_modules/eslint-loader/index.js??ref--13-0!/root/zhenjinote/note/vue/src/router/index.js","dependencies":[{"path":"/root/zhenjinote/note/vue/src/router/index.js","mtime":1570011920901},{"path":"/root/zhenjinote/note/vue/.babelrc","mtime":1569934280915},{"path":"/root/zhenjinote/note/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/zhenjinote/note/vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/root/zhenjinote/note/vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport Vue from 'vue';\nimport Router from 'vue-router';\nimport routes from \"./routers\";\nimport store from '@/store';\nimport iView from 'iview';\nimport { setToken, getToken, canTurnTo, setTitle } from '@/libs/util';\nimport config from '@/config';\nvar homeName = config.homeName;\nVue.use(Router);\nvar router = new Router({\n  routes: routes,\n  mode: 'history'\n});\nvar PUBLISH_PAGE_NAME = 'publish';\nvar LOGIN_PAGE_NAME = 'login';\nvar REGISTER_PAGE_NAME = 'register';\nvar FINDPASSWORD_PAGE_NAME = 'findpassword';\nrouter.beforeEach(function (to, from, next) {\n  iView.LoadingBar.start();\n  var token = getToken();\n\n  if (!token && to.name !== LOGIN_PAGE_NAME && to.name !== REGISTER_PAGE_NAME && to.name !== FINDPASSWORD_PAGE_NAME && to.name !== PUB) {\n    // 未登录且要跳转的页面不是登录页\n    next({\n      name: LOGIN_PAGE_NAME // 跳转到登录页\n\n    });\n  } else if (!token && to.name === LOGIN_PAGE_NAME) {\n    // 未登陆且要跳转的页面是登录页\n    next(); // 跳转\n  } else if (!token && to.name === REGISTER_PAGE_NAME) {\n    // 未登陆且要跳转的页面是登录页\n    next(); // 跳转\n  } else if (!token && to.name === FINDPASSWORD_PAGE_NAME) {\n    // 未登陆且要跳转的页面是登录页\n    next(); // 跳转 \n  } else if (token && to.name === LOGIN_PAGE_NAME) {\n    // 已登录且要跳转的页面是登录页\n    next({\n      name: homeName // 跳转到homeName页\n\n    });\n  } else {\n    next();\n  }\n});\nrouter.afterEach(function (to) {\n  setTitle(to, router.app);\n  iView.LoadingBar.finish();\n  window.scrollTo(0, 0);\n});\nexport default router;",{"version":3,"sources":["/root/zhenjinote/note/vue/src/router/index.js"],"names":["Vue","Router","routes","store","iView","setToken","getToken","canTurnTo","setTitle","config","homeName","use","router","mode","PUBLISH_PAGE_NAME","LOGIN_PAGE_NAME","REGISTER_PAGE_NAME","FINDPASSWORD_PAGE_NAME","beforeEach","to","from","next","LoadingBar","start","token","name","PUB","afterEach","app","finish","window","scrollTo"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,OAAOC,MAAP;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,QAAnB,EAA6BC,SAA7B,EAAwCC,QAAxC,QAAwD,aAAxD;AACA,OAAOC,MAAP,MAAmB,UAAnB;IACQC,Q,GAAaD,M,CAAbC,Q;AAERV,GAAG,CAACW,GAAJ,CAAQV,MAAR;AACA,IAAMW,MAAM,GAAG,IAAIX,MAAJ,CAAW;AACxBC,EAAAA,MAAM,EAANA,MADwB;AAExBW,EAAAA,IAAI,EAAE;AAFkB,CAAX,CAAf;AAIA,IAAMC,iBAAiB,GAAG,SAA1B;AACA,IAAMC,eAAe,GAAG,OAAxB;AACA,IAAMC,kBAAkB,GAAG,UAA3B;AACA,IAAMC,sBAAsB,GAAG,cAA/B;AAEAL,MAAM,CAACM,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpCjB,EAAAA,KAAK,CAACkB,UAAN,CAAiBC,KAAjB;AACA,MAAMC,KAAK,GAAGlB,QAAQ,EAAtB;;AACA,MAAI,CAACkB,KAAD,IAAUL,EAAE,CAACM,IAAH,KAAYV,eAAtB,IAAyCI,EAAE,CAACM,IAAH,KAAYT,kBAArD,IAA2EG,EAAE,CAACM,IAAH,KAAYR,sBAAvF,IAAiHE,EAAE,CAACM,IAAH,KAAYC,GAAjI,EAAsI;AACpI;AACAL,IAAAA,IAAI,CAAC;AACHI,MAAAA,IAAI,EAAEV,eADH,CACmB;;AADnB,KAAD,CAAJ;AAGD,GALD,MAKO,IAAI,CAACS,KAAD,IAAUL,EAAE,CAACM,IAAH,KAAYV,eAA1B,EAA2C;AAChD;AACAM,IAAAA,IAAI,GAF4C,CAEzC;AACR,GAHM,MAGA,IAAI,CAACG,KAAD,IAAUL,EAAE,CAACM,IAAH,KAAYT,kBAA1B,EAA8C;AACnD;AACAK,IAAAA,IAAI,GAF+C,CAE5C;AACR,GAHM,MAGA,IAAI,CAACG,KAAD,IAAUL,EAAE,CAACM,IAAH,KAAYR,sBAA1B,EAAkD;AACvD;AACAI,IAAAA,IAAI,GAFmD,CAEhD;AACR,GAHM,MAGA,IAAIG,KAAK,IAAIL,EAAE,CAACM,IAAH,KAAYV,eAAzB,EAA0C;AAC/C;AACAM,IAAAA,IAAI,CAAC;AACHI,MAAAA,IAAI,EAAEf,QADH,CACY;;AADZ,KAAD,CAAJ;AAGD,GALM,MAKA;AACHW,IAAAA,IAAI;AACL;AACJ,CAzBD;AA2BAT,MAAM,CAACe,SAAP,CAAiB,UAAAR,EAAE,EAAI;AACrBX,EAAAA,QAAQ,CAACW,EAAD,EAAKP,MAAM,CAACgB,GAAZ,CAAR;AACAxB,EAAAA,KAAK,CAACkB,UAAN,CAAiBO,MAAjB;AACAC,EAAAA,MAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACD,CAJD;AAMA,eAAenB,MAAf","sourcesContent":["import Vue from 'vue'\nimport Router from 'vue-router'\nimport routes from './routers'\nimport store from '@/store'\nimport iView from 'iview'\nimport { setToken, getToken, canTurnTo, setTitle } from '@/libs/util'\nimport config from '@/config'\nconst { homeName } = config\n\nVue.use(Router)\nconst router = new Router({\n  routes,\n  mode: 'history'\n})\nconst PUBLISH_PAGE_NAME = 'publish'\nconst LOGIN_PAGE_NAME = 'login'\nconst REGISTER_PAGE_NAME = 'register'\nconst FINDPASSWORD_PAGE_NAME = 'findpassword'\n\nrouter.beforeEach((to, from, next) => {\n  iView.LoadingBar.start()\n  const token = getToken()\n  if (!token && to.name !== LOGIN_PAGE_NAME && to.name !== REGISTER_PAGE_NAME && to.name !== FINDPASSWORD_PAGE_NAME && to.name !== PUB) {\n    // 未登录且要跳转的页面不是登录页\n    next({\n      name: LOGIN_PAGE_NAME // 跳转到登录页\n    })\n  } else if (!token && to.name === LOGIN_PAGE_NAME) {\n    // 未登陆且要跳转的页面是登录页\n    next() // 跳转\n  } else if (!token && to.name === REGISTER_PAGE_NAME) {\n    // 未登陆且要跳转的页面是登录页\n    next() // 跳转\n  } else if (!token && to.name === FINDPASSWORD_PAGE_NAME) {\n    // 未登陆且要跳转的页面是登录页\n    next() // 跳转 \n  } else if (token && to.name === LOGIN_PAGE_NAME) {\n    // 已登录且要跳转的页面是登录页\n    next({\n      name: homeName // 跳转到homeName页\n    })\n  } else {\n      next()\n    }\n})\n\nrouter.afterEach(to => {\n  setTitle(to, router.app)\n  iView.LoadingBar.finish()\n  window.scrollTo(0, 0)\n})\n\nexport default router\n"]}]}