{"remainingRequest":"/root/zhenjinote/note/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/zhenjinote/note/vue/src/view/changeavatar/changeavatar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/root/zhenjinote/note/vue/src/view/changeavatar/changeavatar.vue","mtime":1572180141811},{"path":"/root/zhenjinote/note/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/zhenjinote/note/vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/root/zhenjinote/note/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/zhenjinote/note/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios'\nimport http  from '@/libs/http'\nimport {getToken } from '@/libs/util'\nexport default {\n  data(){\n    return{\n      token: getToken(),\n      //headers: { 'Content-Type': 'multipart/form-data' },\n      data: { \n        'token': this.token\n      },\n      uploadList: [],\n      formValidate: {\n          labelUrl: require(\"../../assets/images/avatar.jpg\")\n        },\n    }\n  },\n  methods: {\n    handleView (name) {\n      this.imgName = name;\n      this.visible = true;\n    },\n    handleRemove (file) {\n      const fileList = this.$refs.upload.fileList;\n      this.$refs.upload.fileList.splice(fileList.indexOf(file), 1);\n    },\n    handleSuccess (res, file) {\n      file.url = 'https://o5wwk8baw.qnssl.com/7eb99afb9d5f317c912f08b5212fd69a/avatar';\n      file.name = '7eb99afb9d5f317c912f08b5212fd69a';\n      console.log(file.url)\n    },\n    handleFormatError (file) {\n      this.$Notice.warning({\n          title: '上传文件格式错误',\n          desc: '文件格式' + file.name + ' 错误,请重新上传,支持的文件格式为'\n      });\n    },\n    handleMaxSize (file) {\n      this.$Notice.warning({\n          title: '超出文件大小限制',\n          desc: 'File  ' + file.name + ' 文件太大,请不要超过8M'\n      });\n    },\n    handleBeforeUpload (file) {\n      if(this.uploadList.length >= 1){\n          this.$Message.info(\"最多只能上传1个文件\");\n      }\n      else{\n          this.uploadList.push(file);\n      }\n      return false;\n    },\n    handleUpload () { \n      // 上传文件\n      const instance = axios.create({\n            withCredentials: true\n      })\n      var formdata = new FormData()\n      formdata.append('file', this.uploadList[0])\n      formdata.append('token', this.token)\n      instance({\n              url: '/api/upload',\n              method: 'post',\n              data: formdata,\n              headers: { 'Content-Type': 'multipart/form-data' },\n          }).then((res) => {\n            res.data = eval('(' + res.data + ')')\n            switch(res.data.code ){\n                case 'Z10010':\n                this.$Notice.success({\n                  title: '上传成功',\n                  desc: res.data.message\n                })\n                break\n                case 'Z1001':\n                this.$Notice.error({\n                  title: '系统异常',\n                  desc: '系统发生异常,请稍后再次尝试'\n                 })\n                break\n                case 'Z1004':\n                this.$Notice.error({\n                  title: '认证失败',\n                  desc: '认证失败,请稍后再次尝试'\n                })\n                break\n                case 'Z10011':\n                this.$Notice.error({\n                  title: '上传异常',\n                  desc: '上传失败,请稍候重试!'\n                })\n                break\n                case 'Z10012':\n                this.$Notice.error({\n                  title: '上传异常',\n                  desc: '上传文件名为空,请添加文件名'\n                })\n                break\n                case 'Z10013':\n                this.$Notice.error({\n                  title: '上传异常',\n                  desc: '上传文件格式不正确,请稍候重试'\n                })\n                break\n                default:\n                break\n            }\n          })\n\n  },\n  },\n  mounted (){\n  }\n}\n",{"version":3,"sources":["changeavatar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"changeavatar.vue","sourceRoot":"src/view/changeavatar","sourcesContent":["<template>\n    <div class=\"div\">\n      <Upload\n      ref=\"handleUpload\"\n      action=\"/api/upload\"\n      :on-success=\"handleSuccess\"\n      :before-upload=\"handleBeforeUpload\"\n      :show-upload-list=\"true\"\n      :format=\"['jpg','jpeg','png', 'gif']\"\n      :max-size=\"8192\"\n      :on-exceeded-size=\"handleMaxSize\"\n      :on-format-error=\"handleFormatError\">\n      <img class=\"iconlabelUrl\" :src=\"formValidate.labelUrl\" alt=\"\">\n      </Upload>\n      <Button type=\"primary\" @click=\"handleUpload\" style='width:100px'>保存</Button>\n      <Button @click=\"handleReset()\" style=\"margin-left: 8px;width:100px\">返回</Button>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport http  from '@/libs/http'\nimport {getToken } from '@/libs/util'\nexport default {\n  data(){\n    return{\n      token: getToken(),\n      //headers: { 'Content-Type': 'multipart/form-data' },\n      data: { \n        'token': this.token\n      },\n      uploadList: [],\n      formValidate: {\n          labelUrl: require(\"../../assets/images/avatar.jpg\")\n        },\n    }\n  },\n  methods: {\n    handleView (name) {\n      this.imgName = name;\n      this.visible = true;\n    },\n    handleRemove (file) {\n      const fileList = this.$refs.upload.fileList;\n      this.$refs.upload.fileList.splice(fileList.indexOf(file), 1);\n    },\n    handleSuccess (res, file) {\n      file.url = 'https://o5wwk8baw.qnssl.com/7eb99afb9d5f317c912f08b5212fd69a/avatar';\n      file.name = '7eb99afb9d5f317c912f08b5212fd69a';\n      console.log(file.url)\n    },\n    handleFormatError (file) {\n      this.$Notice.warning({\n          title: '上传文件格式错误',\n          desc: '文件格式' + file.name + ' 错误,请重新上传,支持的文件格式为'\n      });\n    },\n    handleMaxSize (file) {\n      this.$Notice.warning({\n          title: '超出文件大小限制',\n          desc: 'File  ' + file.name + ' 文件太大,请不要超过8M'\n      });\n    },\n    handleBeforeUpload (file) {\n      if(this.uploadList.length >= 1){\n          this.$Message.info(\"最多只能上传1个文件\");\n      }\n      else{\n          this.uploadList.push(file);\n      }\n      return false;\n    },\n    handleUpload () { \n      // 上传文件\n      const instance = axios.create({\n            withCredentials: true\n      })\n      var formdata = new FormData()\n      formdata.append('file', this.uploadList[0])\n      formdata.append('token', this.token)\n      instance({\n              url: '/api/upload',\n              method: 'post',\n              data: formdata,\n              headers: { 'Content-Type': 'multipart/form-data' },\n          }).then((res) => {\n            res.data = eval('(' + res.data + ')')\n            switch(res.data.code ){\n                case 'Z10010':\n                this.$Notice.success({\n                  title: '上传成功',\n                  desc: res.data.message\n                })\n                break\n                case 'Z1001':\n                this.$Notice.error({\n                  title: '系统异常',\n                  desc: '系统发生异常,请稍后再次尝试'\n                 })\n                break\n                case 'Z1004':\n                this.$Notice.error({\n                  title: '认证失败',\n                  desc: '认证失败,请稍后再次尝试'\n                })\n                break\n                case 'Z10011':\n                this.$Notice.error({\n                  title: '上传异常',\n                  desc: '上传失败,请稍候重试!'\n                })\n                break\n                case 'Z10012':\n                this.$Notice.error({\n                  title: '上传异常',\n                  desc: '上传文件名为空,请添加文件名'\n                })\n                break\n                case 'Z10013':\n                this.$Notice.error({\n                  title: '上传异常',\n                  desc: '上传文件格式不正确,请稍候重试'\n                })\n                break\n                default:\n                break\n            }\n          })\n\n  },\n  },\n  mounted (){\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n    .div{\n      padding: 10px;\n      text-align:center;\n      margin-top: 10px;\n      margin-left: auto;\n      margin-right: auto;\n    }\n    .title{\n        height:60px;line-height:60px;background:#fff;\n        font-size: 20px;text-indent: 20px;\n    }\n    .ivu-form .ivu-form-item-label{\n        text-align: justify !important\n    }\n    .iconlabelUrl {\n        width: 240px;\n        height: 120px;\n    }\n</style>"]}]}