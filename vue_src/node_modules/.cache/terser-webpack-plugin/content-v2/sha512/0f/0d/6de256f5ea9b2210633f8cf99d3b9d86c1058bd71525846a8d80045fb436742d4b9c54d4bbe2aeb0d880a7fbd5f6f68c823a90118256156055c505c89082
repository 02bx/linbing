{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-4aac906c\"],{\"10fd\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"b\",function(){return isemail}),__webpack_require__.d(__webpack_exports__,\"e\",function(){return isusername}),__webpack_require__.d(__webpack_exports__,\"d\",function(){return istarget}),__webpack_require__.d(__webpack_exports__,\"f\",function(){return loginusername}),__webpack_require__.d(__webpack_exports__,\"a\",function(){return ischecknum}),__webpack_require__.d(__webpack_exports__,\"c\",function(){return ispassword});var _libs_http__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"b1d0\"),_libs_crypto__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"e0ac\"),_libs_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"c276\");function isemail(rule,value,callback){var reg=/^[a-z0-9](?:[-_.+]?[a-z0-9]+)*@.*?\\.com$/;if(!reg.test(value.trim()))return callback(new Error(\"请输入合法邮箱\"));var data={type:\"email\",data:value};data=JSON.stringify(data);var params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_1__[\"a\"].Encrypt(data)};_libs_http__WEBPACK_IMPORTED_MODULE_0__[\"a\"].post(\"/api/query\",params).then(function(res){switch(res.data=eval(\"(\"+res.data+\")\"),res.data.code){case\"Z1001\":return callback(new Error(\"系统异常\"));case\"Z1002\":return callback(new Error(\"请求方法异常\"));case\"Z1007\":return callback(new Error(\"邮箱已注册\"));default:callback()}})}function isusername(rule,value,callback){var reg=/^[A-Za-z0-9]{1,10}$/;if(!reg.test(value.trim()))return callback(new Error(\"用户名输入错误\"));var data={type:\"username\",data:value};data=JSON.stringify(data);var params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_1__[\"a\"].Encrypt(data)};_libs_http__WEBPACK_IMPORTED_MODULE_0__[\"a\"].post(\"/api/query\",params).then(function(res){switch(res.data=eval(\"(\"+res.data+\")\"),res.data.code){case\"Z1001\":return callback(new Error(\"系统异常\"));case\"Z1002\":return callback(new Error(\"请求方法异常\"));case\"Z1006\":return callback(new Error(\"用户名已注册\"));default:callback()}})}function istarget(rule,value,callback){var data={type:\"target\",data:{data:value,token:Object(_libs_util__WEBPACK_IMPORTED_MODULE_2__[\"i\"])()}};data=JSON.stringify(data);var params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_1__[\"a\"].Encrypt(data)};_libs_http__WEBPACK_IMPORTED_MODULE_0__[\"a\"].post(\"/api/query\",params).then(function(res){switch(res.data=eval(\"(\"+res.data+\")\"),res.data.code){case\"Z1001\":return callback(new Error(\"系统异常\"));case\"Z1002\":return callback(new Error(\"请求方法异常\"));case\"Z10010\":return callback(new Error(\"目标已存在,请不要重复添加目标,如已删除请在垃圾箱内恢复\"));default:callback()}})}function loginusername(e,r,a){var _=/^[A-Za-z0-9]{1,10}$/;if(!_.test(r.trim()))return a(new Error(\"用户名输入错误\"));a()}function ischecknum(e,r,a){var _=/^[A-Za-z0-9]{6}$/;if(!_.test(r.trim()))return a(new Error(\"注册码输入错误\"));a()}function ispassword(e,r,a){var _=/^[A-Za-z0-9]{8,16}$/;if(!_.test(r.trim()))return a(new Error(\"密码输入错误\"));a()}},2055:function(module,__webpack_exports__,__webpack_require__){\"use strict\";var _libs_validate__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"10fd\"),_libs_crypto__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"e0ac\"),_libs_http__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"b1d0\"),_libs_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"c276\");__webpack_exports__[\"a\"]={name:\"ChangepasswordForm\",props:{oldpasswordRules:{type:Array,default:function(){return[{required:!0,trigger:\"blur\",validator:_libs_validate__WEBPACK_IMPORTED_MODULE_0__[\"c\"]}]}},newpasswordRules:{type:Array,default:function(){return[{required:!0,trigger:\"blur\",validator:_libs_validate__WEBPACK_IMPORTED_MODULE_0__[\"c\"]}]}},newpasswordconfirmRules:{type:Array,default:function(){return[{required:!0,trigger:\"blur\",validator:_libs_validate__WEBPACK_IMPORTED_MODULE_0__[\"c\"]}]}}},data:function(){return{capta:\"\",form:{oldpassword:\"\",newpassword:\"\",newpasswordconfirm:\"\"}}},computed:{rules:function(){return{oldpassword:this.oldpasswordRules,newpassword:this.newpasswordRules,newpasswordconfirm:this.newpasswordconfirmRules}}},methods:{getchecknum:function getchecknum(){var _this=this;if(\"\"==this.form.email)this.$refs.ChangepasswordForm.validateField(\"email\",function(e){});else{var data={type:\"email\",data:this.form.email};data=JSON.stringify(data);var params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_1__[\"a\"].Encrypt(data)};_libs_http__WEBPACK_IMPORTED_MODULE_2__[\"a\"].post(\"/api/getchecknum\",params).then(function(res){switch(res.data=eval(\"(\"+res.data+\")\"),res.data.code){case\"Z1000\":_this.$Notice.success({title:\"发送邮件成功\",desc:\"请打开邮件查收验证码 \"}),_this.capta=res.data.data.capta;break;case\"Z1001\":_this.$Notice.error({title:\"发送邮件失败\",desc:\"系统发生异常,请稍后再次尝试\"});break;case\"Z1002\":_this.$Notice.error({title:\"发送邮件失败\",desc:\"系统发生异常,请稍后再次尝试\"});break}})}},handleSubmit:function(){var e=this;this.$refs.ChangepasswordForm.validate(function(r){r&&(e.form.newpassword!=e.form.newpasswordconfirm?e.$Notice.error({title:\"二次密码输入不一样\",desc:\"二次密码输入不一样,请重新输入!\"}):e.$emit(\"on-success-valid\",{oldpassword:e.form.oldpassword,newpassword:e.form.newpassword,token:Object(_libs_util__WEBPACK_IMPORTED_MODULE_3__[\"i\"])()}))})}}}},4268:function(e,r,a){\"use strict\";a.r(r);var _=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a(\"div\",{staticClass:\"changepassword\"},[a(\"div\",{staticClass:\"changepassword-con\"},[a(\"Card\",{staticClass:\"card\",attrs:{icon:\"log-in\",title:\"修改密码\",bordered:!1}},[a(\"div\",{staticClass:\"form-con\"},[a(\"changepassword-form\",{on:{\"on-success-valid\":e.handleSubmit}})],1)])],1)])},t=[],s=a(\"b074\"),o=s[\"a\"],n=(a(\"8f80\"),a(\"2877\")),c=Object(n[\"a\"])(o,_,t,!1,null,null,null);r[\"default\"]=c.exports},5391:function(e,r,a){\"use strict\";var _=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a(\"Form\",{ref:\"ChangepasswordForm\",attrs:{model:e.form,rules:e.rules},nativeOn:{keydown:function(r){return!r.type.indexOf(\"key\")&&e._k(r.keyCode,\"enter\",13,r.key,\"Enter\")?null:e.handleSubmit(r)}}},[a(\"FormItem\",{attrs:{prop:\"oldpassword\"}},[a(\"Input\",{attrs:{type:\"password\",placeholder:\"请输入旧密码,8-16位大小写字母或数字\"},model:{value:e.form.oldpassword,callback:function(r){e.$set(e.form,\"oldpassword\",r)},expression:\"form.oldpassword\"}},[a(\"span\",{attrs:{slot:\"prepend\"},slot:\"prepend\"},[a(\"Icon\",{attrs:{size:14,type:\"md-lock\"}})],1)])],1),a(\"FormItem\",{attrs:{prop:\"newpassword\"}},[a(\"Input\",{attrs:{type:\"password\",placeholder:\"请输入新密码,8-16位大小写字母或数字\"},model:{value:e.form.newpassword,callback:function(r){e.$set(e.form,\"newpassword\",r)},expression:\"form.newpassword\"}},[a(\"span\",{attrs:{slot:\"prepend\"},slot:\"prepend\"},[a(\"Icon\",{attrs:{size:14,type:\"md-lock\"}})],1)])],1),a(\"FormItem\",{attrs:{prop:\"newpasswordconfirm\"}},[a(\"Input\",{attrs:{type:\"password\",placeholder:\"请再次输入新密码,8-16位大小写字母或数字\"},model:{value:e.form.newpasswordconfirm,callback:function(r){e.$set(e.form,\"newpasswordconfirm\",r)},expression:\"form.newpasswordconfirm\"}},[a(\"span\",{attrs:{slot:\"prepend\"},slot:\"prepend\"},[a(\"Icon\",{attrs:{size:14,type:\"md-lock\"}})],1)])],1),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\",long:\"\"},on:{click:e.handleSubmit}},[e._v(\"确定修改\")])],1)],1)},t=[],s=a(\"2055\"),o=s[\"a\"],n=a(\"2877\"),c=Object(n[\"a\"])(o,_,t,!1,null,null,null),i=c.exports;r[\"a\"]=i},\"8f80\":function(e,r,a){\"use strict\";var _=a(\"9578\"),t=a.n(_);t.a},9578:function(e,r,a){},b074:function(module,__webpack_exports__,__webpack_require__){\"use strict\";var _c_changepassword_form__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"5391\"),_libs_crypto__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"e0ac\"),_libs_http__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"b1d0\"),_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"4360\");__webpack_exports__[\"a\"]={components:{ChangepasswordForm:_c_changepassword_form__WEBPACK_IMPORTED_MODULE_0__[\"a\"]},methods:{handleSubmit:function handleSubmit(_ref){var _this=this,oldpassword=_ref.oldpassword,newpassword=_ref.newpassword,token=_ref.token,data={oldpassword:oldpassword.trim(),newpassword:newpassword.trim(),token:token.trim()};data=JSON.stringify(data);var params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_1__[\"a\"].Encrypt(data)};_libs_http__WEBPACK_IMPORTED_MODULE_2__[\"a\"].post(\"/api/changepassword\",params).then(function(res){switch(res.data=eval(\"(\"+res.data+\")\"),res.data.code){case\"Z1000\":_this.$Notice.success({title:\"修改成功\",desc:\"请稍后在跳转的登录页面登录\"}),setTimeout(function(){_store__WEBPACK_IMPORTED_MODULE_3__[\"a\"].commit(\"setToken\",\"\"),_this.$router.push({path:\"/login\"})},4e3);break;case\"Z1001\":_this.$Notice.error({title:\"修改密码失败\",desc:\"系统发生异常,请稍后再次尝试\"});break;case\"Z1002\":_this.$Notice.error({title:\"修改密码失败\",desc:\"系统发生异常,请稍后再次尝试\"});break;case\"Z1004\":_this.$Notice.error({title:\"修改密码失败\",desc:\"认证失败,请稍后再次尝试\"});break;case\"Z1008\":_this.$Notice.error({title:\"修改密码失败\",desc:\"原密码错误,请重新输入密码再次尝试\"});break;default:break}})}}}}}]);","extractedComments":[]}